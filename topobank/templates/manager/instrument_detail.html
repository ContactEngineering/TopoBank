{% extends 'base.html' %}
{% load fontawesome %}
{% load surface_tags %}
{% load guardian_tags %}
{% load static %}
{% load render_table from django_tables2 %}


{% block content %}

  {% get_obj_perms request.user for instrument as "instrument_perms" %}

  <div class="tab-content pt-2 extra-tab">

      <div class="row">

        <div class="col-12 col-sm-4 col-md-3 col-lg-2">

          <div class="nav nav-pills nav-pills-custom flex-column" aria-orientation="vertical">
              <a class="nav-link mb-3 p-3 shadow active" data-toggle="pill" href="#parameters" role="tab" aria-selected="true">
                Default Parameters
              </a>
              <a class="nav-link mb-3 p-3 shadow" data-toggle="pill" href="#description" role="tab" aria-selected="false">
                Description
              </a>
              <a class="nav-link mb-3 p-3 shadow" data-toggle="pill" href="#measurements" role="tab" aria-selected="false">
                Measurements
              </a>
          </div>
        </div>

        <div class="col-12 col-sm-5 col-md-6 col-lg-7">

          <div class="tab-content rounded tab-content-vertical-tabs">

            <div class="tab-pane fade active show" id="parameters">
              {{ instrument.parameters }}
            </div>

            <div class="tab-pane p-2 fade" id="description">
              {{ instrument.description|default:"(no description)" }}
            </div>

            <div class="tab-pane p-2 fade" id="measurements">
              <div class="alert alert-info">These measurements have been done with this instrument.</div>
              {% render_table topography_list_table %}
            </div>

          </div>

        </div>

        {# Sidebar with buttons and information #}
        <div class="col-12 col-sm-3 col-md-3 col-lg-3">

          {# Buttons #}
          <div class="row p-3">
            <div class="col">

              {% if "change_instrument" in instrument_perms %}
                <a href="{% url 'manager:instrument-update' instrument.id %}" class="btn btn-default btn-block btn-lg">
                  {% fontawesome_icon 'edit' %} Edit
                </a>
              {% endif %}

              {% if "delete_instrument" in instrument_perms %}
                <a href="{% url 'manager:instrument-delete' instrument.id %}"
                   class="btn btn-outline-danger btn-block btn-lg">
                  {% fontawesome_icon 'trash' %} Delete
                </a>
              {% endif %}
            </div>
          </div>
        </div>

      </div>

  </div>

{% endblock content %}
